function showResults(e,t){function n(e){if(e){var t={isCorrect:e.isAnswerCorrect(),correctAnswer:e.correctAnswer,explanation:e?.jsonObj?.explanation||""};e.description=JSON.stringify(t)}}t.firstPageIsStartPage=!1,t.startSurveyText="",t.pages[0]={elements:[{type:"html",html:"<h4>You got <b>{correctAnswers}</b> out of <b>{questionCount}</b> correct answers.</h4>"}]};const r=new Survey.Model(t);r.data=e,r.readOnly=!0,r.questionsOnPageMode="singlePage",r.showProgressBar=!1,r.firstPageIsStartPage=!1,r.onTextMarkdown.add(((e,t)=>{if("description"==t.name){const e=JSON.parse(t.text);e.isCorrect?t.html=`<p><span class='correctNotice'>Correct</span></p><p>${e.explanation}</p>`:t.html=`<p><span class='incorrectNotice'>Wrong</span>: the correct answer is: <em>${e.correctAnswer}</em></p><p>${e.explanation}</p>`}else if("text"==t.name){const e=t.element;if(!e)return;const n=e.correctAnswer;t.text===n?t.html=`<span class='correctAnswer'>${t.text}</span>`:e.value===t.text&&(t.html=`<span class='incorrectAnswer'>${t.text}</span>`)}})),r.getAllQuestions().forEach((e=>n(e))),document.getElementById("surveyElement").style.display="none",document.getElementById("results").style.display="block",r.addNavigationItem({id:"sv-nav-clear-page",title:"Start Again",action:()=>{location.reload()},css:"nav-button",innerCss:"sd-btn"}),r.render(document.getElementById("results"))}function initQuiz(e,t,n,r){let s={title:e,showProgressBar:!0,firstPageIsStartPage:!0,startSurveyText:"Start",pages:[{elements:[{type:"html",html:t}]},...r.map(((e,t)=>({type:"radiogroup",name:`q${t+1}`,title:e.question,choicesOrder:"random",choices:e.choices,correctAnswer:e.choices[e.correct_answer],explanation:e.explanation}))).map((e=>({elements:[e]})))],requiredMark:"",completedHtml:"<h4>You got <b>{correctAnswers}</b> out of <b>{questionCount}</b> correct answers.</h4>"};n&&n>0&&(s.timeLimit=n,s.showTimer=!0);const o=new Survey.Model(s);o.onComplete.add((e=>{showResults(e.data,s)})),document.addEventListener("DOMContentLoaded",(function(){o.render(document.getElementById("surveyElement"))})),o.render(document.getElementById("surveyElement"))}